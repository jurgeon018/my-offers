name = "my-offers"
team = "happiness"

[runtime]
name = "python"
version = "3.8"

[[dependency]]
type = "postgres"
alias = "my_offers"

[[dependency]]
type = "rabbitmq"

[[dependency]]
type = "redis"
alias = "default"

[job.web]
type = "web"
memory = 128

[job.process_announcement_consumer]
type = "consumer"
command = "process_announcement_consumer"

[job.process_announcement_consumer.prod]
type = "consumer"
command = "process_announcement_consumer"
instances = 3
cpu = 2048
memory = 128

[job.process_announcement_consumer_fill]
type = "consumer"
command = "process_announcement_consumer_fill"

[job.process_announcement_consumer_fill.prod]
instances = 3
cpu = 2048

[job.save_moderation_offer_offence_consumer]
type = "consumer"
command = "save_moderation_offer_offence_consumer"
memory = 128

[job.save_announcement_contract_consumer]
type = "consumer"
command = "save_announcement_contract_consumer"
memory = 128

[job.mark_to_delete_announcement_contract_consumer]
type = "consumer"
command = "mark_to_delete_announcement_contract_consumer"
memory = 128

[job.save_offer_unload_error_consumer]
type = "consumer"
command = "save_offer_unload_error_consumer"
memory = 128

[job.save_agent_consumer]
type = "consumer"
command = "save_agent_consumer"
memory = 128

[job.save_offer_premoderation_consumer]
type = "consumer"
command = "save_offer_premoderation_consumer"
memory = 128

[job.remove_offer_premoderation_consumer]
type = "consumer"
command = "remove_offer_premoderation_consumer"
memory = 128

[job.reindex_offers]
type = "manage"
command = "reindex-offers"

[job.clear_deleted_offer_cron]
type = "consumer"
command = "clear-deleted-offer-cron"